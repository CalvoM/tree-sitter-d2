==================|||
Isolated valid connections
==================|||

--
->
<-
<->

---|||

(source_file
  (expression
    (connection))
  (expression
    (connection))
  (expression
    (connection))
  (expression
    (connection)))
      
==================|||
Isolated long connections
==================|||

----------
--------->
<---------
<-------->

---|||

(source_file
  (expression
    (connection))
  (expression
    (connection))
  (expression
    (connection))
  (expression
    (connection)))
      
==================|||
Invalid connection "-"
==================|||

-

---|||

(source_file
  (expression
    (identifier)))

==================|||
Invalid connection ">"
==================|||

>

---|||

(source_file
  (ERROR
    (UNEXPECTED '>')))

==================|||
Invalid connection "<"
==================|||

<

---|||

(source_file
  (ERROR
    (UNEXPECTED '\n')))

==================|||
Invalid connection "<>"
==================|||

<>

---|||

(source_file
  (ERROR
    (UNEXPECTED '>')))

==================|||
Basic
==================|||

Write Replica Canada <-> Write Replica Australia

Read Replica <- Master
Write Replica -> Master

Read Replica 1 -- Read Replica 2

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier)))

==================|||
Connection labels
==================|||

Read Replica 1 -- Read Replica 2: Kept in sync

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
      (label))))

==================|||
Multiline shape
==================|||

a --\
  -- b
a <-\
  -- b
a --\
  -> b
a <-\
  -> b
  
---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier)))

==================|||
Repeated Connections
==================|||

Database -> S3: backup
Database -> S3
Database -> S3: backup

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
      (label)))
  (expression
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
      (label))))

==================|||
Connections Chaining
==================|||

# The label applies to each connection in the chain.
High Mem Instance -> EC2 <- High CPU Instance: Hosted By

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier)
    (connection)
    (identifier)
    (label_block
        (label))))

==================|||
Cycles
==================|||

Stage One -> Stage Two -> Stage Three -> Stage Four
Stage Four -> Stage One: repeat

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier)
    (connection)
    (identifier)
    (connection)
    (identifier))
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
        (label))))

==================|||
Connection identifiers
==================|||

x -> y: hi
x -> y: hello

(x -> y)[0].style.stroke: red
(x -> y)[1].style.stroke: blue

---|||

(source_file
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
      (label)))
  (expression
    (identifier)
    (connection)
    (identifier)
    (label_block
      (label)))
  (expression
    (identifier)
    (connection)
    (identifier)
    (connection_identifier)
    (sub_identifier
      (identifier
        (sub_identifier
          (identifier))))
    (label_block
      (label)))
  (expression
    (identifier)
    (connection)
    (identifier)
    (connection_identifier)
    (sub_identifier
      (identifier
        (sub_identifier
          (identifier))))
    (label_block
        (label))))
